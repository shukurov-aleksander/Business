<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet id="1" author="Aleksander.shukurov@gmail.com">
        <comment>fill in the table "company_statuses" with test data</comment>
        <sql>
            WITH series AS (SELECT generate_series(1,1000) sery)
            INSERT INTO company_statuses (company_status, inserted_at_utc, comment, company_id)
            SELECT
                CASE
                    WHEN s.sery % 4 = 0 THEN 'REGISTERED'::company_status_enum
                    WHEN s.sery % 3 = 0  THEN 'ACTIVE'::company_status_enum
                    WHEN s.sery % 2 = 0  THEN 'FREEZED'::company_status_enum
                    ELSE 'ELIMINATED'::company_status_enum
                END,
                NOW() - FLOOR((RANDOM() * (1000 - 500) + 500)) * INTERVAL '1 day',
                lpad('comment about company status', (FLOOR(RANDOM() * ((248 - 32) + 32)))::INTEGER, 'different comment and another'),
                FLOOR(RANDOM() *((SELECT COUNT(*) FROM series) - 1) + 1)
            FROM series s ON CONFLICT DO NOTHING
        </sql>
    </changeSet>
</databaseChangeLog>